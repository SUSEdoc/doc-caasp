<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang=""><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Miscellaneous | Administration Guide | SUSE CaaS Platform 4.5.1</title><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" /><link rel="stylesheet" type="text/css" href="static/css/style.css" /><link rel="stylesheet" type="text/css" href="static/css/highlight.css" /><meta name="generator" content="DAPS 3.0.0 (https://opensuse.github.io/daps) using SUSE XSL Stylesheets 2.0.17 (based on DocBook XSL Stylesheets 1.79.2) - chunked" /><meta name="product-name" content="SUSE CaaS Platform" /><meta name="product-number" content="4.5.1" /><meta name="book-title" content="Administration Guide" /><meta name="chapter-title" content="Chapter 14. Miscellaneous" /><meta name="description" content="In some cases you must configure the container runtime to use a proxy to pull container images." /><meta name="tracker-url" content="https://github.com/SUSE/doc-caasp/issues/new" /><meta name="tracker-type" content="gh" /><meta name="tracker-gh-labels" content="AdminGuide" /><link rel="home" href="index.html" title="Administration Guide" /><link rel="up" href="index.html" title="Administration Guide" /><link rel="prev" href="backup-and-restore-with-velero.html" title="Chapter 13. Backup and Restore with Velero" /><link rel="next" href="_troubleshooting_3.html" title="Chapter 15. Troubleshooting" />
<script type="text/javascript">

if ( window.location.protocol.toLowerCase() != 'file:' ) {
  document.write('<link rel="stylesheet" type="text/css" href="https://static.opensuse.org/fonts/fonts.css"></link>');
}
else {
  document.write('<link rel="stylesheet" type="text/css" href="static/css/fonts-onlylocal.css"></link>');
}

</script><noscript><link rel="stylesheet" type="text/css" href="https://static.opensuse.org/fonts/fonts.css" /></noscript><script src="static/js/jquery-1.10.2.min.js" type="text/javascript"></script><script src="static/js/script.js" type="text/javascript"></script><script src="static/js/highlight.min.js" type="text/javascript"></script><script>

$(document).ready(function() {
  $('.verbatim-wrap.highlight').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});
hljs.configure({
  useBR: false
});

</script></head><body class="draft offline js-off" onload="$('#betawarn-button-wrap').toggle();if (document.cookie.length > 0) {if (document.cookie.indexOf('betawarn=closed') != -1){$('#betawarn').toggle()}};"><div id="betawarn" style="position:fixed;bottom:0;z-index:9025;background-color:#FDE8E8;padding:1em;margin-left:10%;margin-right:10%;display:block;border-top:.75em solid #E11;width:80%"><p style="color:#333;margin:1em 0;padding:0;">This is a draft document that was built and uploaded automatically. It may document beta software and be incomplete or even incorrect. <strong>Use this document at your own risk.</strong></p> <div id="betawarn-button-wrap" style="display:none;margin:0;padding:0;"><a href="#" onclick="$('#betawarn').toggle();var d=new Date();d.setTime(d.getTime()+(0.5*24*60*60*1000));document.cookie='betawarn=closed; expires='+d.toUTCString()+'; path=/'; return false;" style="color:#333;text-decoration:underline;float:left;margin-top:.5em;padding:1em;display:block;background-color:#FABEBE;">I understand this is a draft</a></div></div><div class="bypass-block"><a href="#_content">Jump to content</a><a href="#_bottom-navigation">Jump to page navigation: previous page [access key p]/next page [access key n]</a></div><div id="_outer-wrap"><div id="_white-bg" style="background-color: #FABEBE;"><div id="_header"><div id="_logo"><img src="static/images/logo.png" alt="Logo" /></div><div class="crumbs"><a class="book-link" href="index.html" title="Administration Guide"><span class="book-icon">Administration Guide</span></a><span> › </span><a class="crumb" href="_miscellaneous.html">Miscellaneous</a></div><div class="clearme"></div></div></div><div id="_toolbar-wrap"><div id="_toolbar"><div id="_toc-area" class="inactive"><a id="_toc-area-button" class="tool" title="Contents" accesskey="c" href="index.html"><span class="tool-spacer"><span class="toc-icon">Contents</span><span class="clearme"></span></span><span class="tool-label">Contents</span></a><div class="active-contents bubble-corner"></div><div class="active-contents bubble"><div class="bubble-container"><h6>Administration Guide</h6><div id="_bubble-toc"><ol><li class="inactive"><a href="pr01.html"><span class="number"> </span><span class="name"></span></a></li><li class="inactive"><a href="_about_this_guide.html"><span class="number">1 </span><span class="name">About This Guide</span></a></li><li class="inactive"><a href="_cluster_management.html"><span class="number">2 </span><span class="name">Cluster Management</span></a></li><li class="inactive"><a href="_software_management.html"><span class="number">3 </span><span class="name">Software Management</span></a></li><li class="inactive"><a href="_cluster_updates.html"><span class="number">4 </span><span class="name">Cluster Updates</span></a></li><li class="inactive"><a href="_upgrading_suse_caas_platform.html"><span class="number">5 </span><span class="name">Upgrading SUSE CaaS Platform</span></a></li><li class="inactive"><a href="_security.html"><span class="number">6 </span><span class="name">Security</span></a></li><li class="inactive"><a href="_logging.html"><span class="number">7 </span><span class="name">Logging</span></a></li><li class="inactive"><a href="_monitoring.html"><span class="number">8 </span><span class="name">Monitoring</span></a></li><li class="inactive"><a href="_storage.html"><span class="number">9 </span><span class="name">Storage</span></a></li><li class="inactive"><a href="_integration.html"><span class="number">10 </span><span class="name">Integration</span></a></li><li class="inactive"><a href="_gpu_dependent_workloads.html"><span class="number">11 </span><span class="name">GPU-Dependent Workloads</span></a></li><li class="inactive"><a href="_cluster_disaster_recovery.html"><span class="number">12 </span><span class="name">Cluster Disaster Recovery</span></a></li><li class="inactive"><a href="backup-and-restore-with-velero.html"><span class="number">13 </span><span class="name">Backup and Restore with Velero</span></a></li><li class="inactive"><a href="_miscellaneous.html"><span class="number">14 </span><span class="name">Miscellaneous</span></a></li><li class="inactive"><a href="_troubleshooting_3.html"><span class="number">15 </span><span class="name">Troubleshooting</span></a></li><li class="inactive"><a href="_glossary.html"><span class="number">16 </span><span class="name">Glossary</span></a></li><li class="inactive"><a href="_contributors.html"><span class="number">A </span><span class="name">Contributors</span></a></li><li class="inactive"><a href="_gnu_licenses.html"><span class="number">B </span><span class="name">GNU Licenses</span></a></li></ol></div><div class="clearme"></div></div></div></div><div id="_nav-area" class="inactive"><div class="tool"><span class="nav-inner"><span class="tool-label">Navigation</span><a accesskey="p" class="tool-spacer" title="Chapter 13. Backup and Restore with Velero" href="backup-and-restore-with-velero.html"><span class="prev-icon">←</span></a><a accesskey="n" class="tool-spacer" title="Chapter 15. Troubleshooting" href="_troubleshooting_3.html"><span class="next-icon">→</span></a></span></div></div></div></div><div id="_fixed-header-wrap" style="background-color: #FABEBE;" class="inactive"><div id="_fixed-header"><div class="crumbs"><a class="book-link" href="index.html" title="Administration Guide"><span class="book-icon">Administration Guide</span></a><span> › </span><a class="crumb" href="_miscellaneous.html">Miscellaneous</a></div><div class="buttons"><a class="top-button button" href="#">Top</a><div class="button"><a accesskey="p" class="tool-spacer" title="Chapter 13. Backup and Restore with Velero" href="backup-and-restore-with-velero.html"><span class="prev-icon">←</span></a><a accesskey="n" class="tool-spacer" title="Chapter 15. Troubleshooting" href="_troubleshooting_3.html"><span class="next-icon">→</span></a></div><div class="clearme"></div></div><div class="clearme"></div></div></div><div id="_content" class="draft "><div class="documentation"><div class="chapter " id="_miscellaneous"><div class="titlepage"><div><div class="version-info">Applies to  <span class="productname ">SUSE CaaS Platform</span> <span class="productnumber ">4.5.1</span></div><div><h1 class="title"><span class="number">14 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Miscellaneous</span> <a title="Permalink" class="permalink" href="_miscellaneous.html#">#</a></h1></div></div></div><div class="line"><div class="toc"><dl><dt><span class="section"><a href="_miscellaneous.html#_configuring_httphttps_proxy_for_cri_o"><span class="number">14.1 </span><span class="name">Configuring HTTP/HTTPS Proxy for CRI-O</span></a></span></dt><dt><span class="section"><a href="_miscellaneous.html#config-crio-container-registry"><span class="number">14.2 </span><span class="name">Configuring Container Registries for CRI-O</span></a></span></dt><dt><span class="section"><a href="_miscellaneous.html#_flexvolume_configuration"><span class="number">14.3 </span><span class="name">FlexVolume Configuration</span></a></span></dt><dt><span class="section"><a href="_miscellaneous.html#_configuring_kubelet"><span class="number">14.4 </span><span class="name">Configuring kubelet</span></a></span></dt><dt><span class="section"><a href="_miscellaneous.html#k8s-changes-117-118"><span class="number">14.5 </span><span class="name">Changes from Kubernetes 1.17 to 1.18</span></a></span></dt></dl></div></div><div class="sect1" id="_configuring_httphttps_proxy_for_cri_o"><div class="titlepage"><div><div><h2 class="title"><span class="number">14.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Configuring HTTP/HTTPS Proxy for CRI-O</span> <a title="Permalink" class="permalink" href="_miscellaneous.html#_configuring_httphttps_proxy_for_cri_o">#</a></h2></div></div></div><p>In some cases you must configure the container runtime to use a proxy to pull
container images.</p><p>The CRI-O runtime uses the system-wide proxy configuration, defined at <code class="literal">/etc/sysconfig/proxy</code>.</p><p>This file can be edited a number of ways.
It can be pre-configured at build time via AutoYaST, as described in the
<a class="link" href="https://documentation.suse.com/sles/15-SP2/single-html/SLES-autoyast/#Configuration-Network-Proxy" target="_blank">AutoYaST documentation</a>.
On an existing system, the file can be edited via YaST by running <code class="literal">yast2 proxy</code>.</p><p>If preferred, it can alternatively be edited manually as described in the SUSE <a class="link" href="https://www.suse.com/support/kb/doc/?id=7006845" target="_blank">Knowledge Base</a>
article</p><div id="id-1.16.2.6" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.png" /><h6>Note</h6><p>CRI-O and skuba both support four types of comma-separated entries in the <code class="literal">NO_PROXY</code> variable:</p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>An exact IP address (<code class="literal">1.2.3.4</code>)</p></li><li class="listitem "><p>CIDR IP range (<code class="literal">1.2.3.4/16</code>)</p></li><li class="listitem "><p>DNS domain name (<code class="literal">eg.com</code> matches <code class="literal">www.eg.com</code> and <code class="literal">eg.com</code>)</p></li><li class="listitem "><p>Restricted DNS subdomain (<code class="literal">.eg.com</code> matches <code class="literal">www.eg.com</code> but not <code class="literal">eg.com</code>)</p></li></ul></div><p>All standard programs should ignore unsupported values in that variable and continue to work (albeit without the configured proxy)
when encountering an unsupported value.</p></div><div id="id-1.16.2.7" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.png" /><h6>Tip</h6><p>Not all programs on all systems will respect CIDR ranges or restricted subdomains.</p></div><p>After you have configured the system proxy for your environment, restart the container runtime with:</p><div class="verbatim-wrap highlight bash"><pre class="screen">systemctl restart crio</pre></div></div><div class="sect1" id="config-crio-container-registry"><div class="titlepage"><div><div><h2 class="title"><span class="number">14.2 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Configuring Container Registries for CRI-O</span> <a title="Permalink" class="permalink" href="_miscellaneous.html#config-crio-container-registry">#</a></h2></div></div></div><div id="id-1.16.3.2" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.png" /><h6>Important</h6><p>The configuration example in this text uses <code class="literal">VERSION 2</code> of the CRI-O registries
configuration syntax. It is not compatible with the <code class="literal">VERSION 1</code> syntax present
in some upstream examples.</p><p>Please refer to: <a class="link" href="https://raw.githubusercontent.com/containers/image/master/docs/containers-registries.conf.5.md" target="_blank">https://raw.githubusercontent.com/containers/image/master/docs/containers-registries.conf.5.md</a></p></div><div id="id-1.16.3.3" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.png" /><h6>Tip</h6><p>You can create and deploy a custom <code class="literal">registries.conf</code> during the initial bootstrap of the cluster with skuba.
Create the file <code class="literal">&lt;CLUSTER_NAME&gt;/addons/containers/registries.conf</code> and apply your changes there.
This file will be rolled out during node bootstrapping and upgrading.</p></div><p>Every registry-related configuration needs to be done in the <a class="link" href="https://github.com/toml-lang/toml" target="_blank">TOML</a> file
<code class="literal">/etc/containers/registries.conf</code>. After any change of this file, CRI-O
needs to be restarted.</p><p>The configuration is a sequence of <code class="literal">[[registry]]</code> entries. For example, a
single registry entry within that configuration could be added like this:</p><p><code class="literal">/etc/containers/registries.conf</code></p><div class="verbatim-wrap"><pre class="screen">[[registry]]
blocked = false
insecure = false
location = "example.net/bar"
prefix = "example.com/foo/images"
mirror = [
    { location = "example-mirror-0.local", insecure = false },
    { location = "example-mirror-1.local", insecure = true, mirror-by-digest-only = true }
]

[[registry]]
blocked = false
insecure = false
location = "example.net/mymirror"
prefix = "example.com/mirror/images"
mirror = [
    { location = "example-mirror-2.local", insecure = false, mirror-by-digest-only = true },
    { location = "example-mirror-3.local", insecure = true }
]
unqualified-search = false</pre></div><p>Given an image name, a single <code class="literal">[[registry]]</code> TOML table is chosen based on its
<code class="literal">prefix</code> field.</p><p>A prefix is mainly a user-specified image name and can have one of the
following formats:</p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p><code class="literal">host[:port]</code></p></li><li class="listitem "><p><code class="literal">host[:port]/namespace[/namespace…]</code></p></li><li class="listitem "><p><code class="literal">host[:port]/namespace[/namespace…]/repo</code></p></li><li class="listitem "><p><code class="literal">host[:port]/namespace[/namespace…]/repo[:tag|@digest]</code></p></li></ul></div><p>The user-specified image name must start with the specified <code class="literal">prefix</code> (and
continue with the appropriate separator) for a particular <code class="literal">[[registry]]</code> TOML
table to be considered. Only the TOML entry with the longest match is used.</p><p>As a special case, the <code class="literal">prefix</code> field can be missing. If so, it defaults to the
value of the <code class="literal">location</code> field.</p><div class="sect2" id="_per_namespace_settings"><div class="titlepage"><div><div><h3 class="title"><span class="number">14.2.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Per-namespace Settings</span> <a title="Permalink" class="permalink" href="_miscellaneous.html#_per_namespace_settings">#</a></h3></div></div></div><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p><code class="literal">insecure</code> (<code class="literal">true</code> or <code class="literal">false</code>): By default, container runtimes require TLS
when retrieving images from a registry. If <code class="literal">insecure</code> is set to <code class="literal">true</code>,
unencrypted HTTP as well as TLS connections with untrusted certificates are
allowed.</p></li><li class="listitem "><p><code class="literal">blocked</code> (<code class="literal">true</code> or <code class="literal">false</code>): If <code class="literal">true</code>, pulling images with matching names
is forbidden.</p></li></ul></div></div><div class="sect2" id="_remapping_and_mirroring_registries"><div class="titlepage"><div><div><h3 class="title"><span class="number">14.2.2 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Remapping and Mirroring Registries</span> <a title="Permalink" class="permalink" href="_miscellaneous.html#_remapping_and_mirroring_registries">#</a></h3></div></div></div><p>The user-specified image reference is, primarily, a "logical" image name,
always used for naming the image. By default, the image reference also directly
specifies the registry and repository to use, but the following options can be
used to redirect the underlying accesses to different registry servers or
locations. This can be used to support configurations with no access to the
Internet without having to change Dockerfiles, or to add redundancy.</p><div class="sect3" id="_location"><div class="titlepage"><div><div><h4 class="title"><span class="number">14.2.2.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name"><code class="literal">location</code></span> <a title="Permalink" class="permalink" href="_miscellaneous.html#_location">#</a></h4></div></div></div><p>Accepts the same format as the <code class="literal">prefix</code> field, and specifies the physical
location of the <code class="literal">prefix</code>-rooted namespace. By default, this is equal to <code class="literal">prefix</code>
(in which case <code class="literal">prefix</code> can be omitted and the <code class="literal">[[registry]]</code> TOML table can
just specify <code class="literal">location</code>).</p><div class="sect4" id="_example"><div class="titlepage"><div><div><h5 class="title"><span class="number">14.2.2.1.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Example</span> <a title="Permalink" class="permalink" href="_miscellaneous.html#_example">#</a></h5></div></div></div><div class="verbatim-wrap"><pre class="screen">prefix = "example.com/foo"
location = "internal-registry-for-example.net/bar"</pre></div><p>Requests for the image <code class="literal">example.com/foo/myimage:latest</code> will actually work with
the <code class="literal">internal-registry-for-example.net/bar/myimage:latest</code> image.</p></div></div><div class="sect3" id="_mirror"><div class="titlepage"><div><div><h4 class="title"><span class="number">14.2.2.2 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name"><code class="literal">mirror</code></span> <a title="Permalink" class="permalink" href="_miscellaneous.html#_mirror">#</a></h4></div></div></div><p>An array of TOML tables specifying (possibly partial) mirrors for the
<code class="literal">prefix</code>-rooted namespace.</p><p>The mirrors are attempted in the specified order. The first one that can be
contacted and contains the image will be used (and if none of the mirrors
contains the image, the primary location specified by the <code class="literal">registry.location</code>
field, or using the unmodified user-specified reference, is tried last).</p><p>Each TOML table in the <code class="literal">mirror</code> array can contain the following fields, with
the same semantics as if specified in the <code class="literal">[[registry]]</code> TOML table directly:</p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p><code class="literal">location</code></p></li><li class="listitem "><p><code class="literal">insecure</code></p></li></ul></div></div><div class="sect3" id="_mirror_by_digest_only"><div class="titlepage"><div><div><h4 class="title"><span class="number">14.2.2.3 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name"><code class="literal">mirror-by-digest-only</code></span> <a title="Permalink" class="permalink" href="_miscellaneous.html#_mirror_by_digest_only">#</a></h4></div></div></div><p>Can be <code class="literal">true</code> or <code class="literal">false</code>. If <code class="literal">true</code>, mirrors will only be used during pulling
if the image reference includes a digest. Referencing an image by digest
ensures that the same one is always used (whereas referencing an image by a tag may
cause different registries to return different images if the tag mapping is out
of sync).</p><p>Note that if this is <code class="literal">true</code>, images referenced by a tag will only use the primary
registry, failing if that registry is not accessible.</p></div></div></div><div class="sect1" id="_flexvolume_configuration"><div class="titlepage"><div><div><h2 class="title"><span class="number">14.3 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">FlexVolume Configuration</span> <a title="Permalink" class="permalink" href="_miscellaneous.html#_flexvolume_configuration">#</a></h2></div></div></div><p>FlexVolume drivers are external (out-of-tree) drivers usually provided by a specific vendor.
They are executable files that are placed in a predefined directory in the cluster on both worker and master nodes.
Pods interact with FlexVolume drivers through the <code class="literal">flexvolume</code> in-tree plugin.</p><p>The vendor driver first has to be installed on each worker and master node in a Kubernetes cluster.
On SUSE CaaS Platform 4, the path to install the drivers is <code class="literal">/usr/lib/kubernetes/kubelet-plugins/volume/exec/</code>.</p><p>If the drivers are deployed with <code class="literal">DaemonSet</code>, this will require changing
the FlexVolume directory path, which is usually stored as an environment
variable, for example for rook:</p><div class="verbatim-wrap highlight bash"><pre class="screen">FLEXVOLUME_DIR_PATH=/usr/lib/kubernetes/kubelet-plugins/volume/exec/</pre></div><p>For a general guide to the FlexVolume configuration, see <a class="link" href="https://github.com/kubernetes/community/blob/master/contributors/devel/sig-storage/flexvolume.md" target="_blank">https://github.com/kubernetes/community/blob/master/contributors/devel/sig-storage/flexvolume.md</a></p></div><div class="sect1" id="_configuring_kubelet"><div class="titlepage"><div><div><h2 class="title"><span class="number">14.4 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Configuring kubelet</span> <a title="Permalink" class="permalink" href="_miscellaneous.html#_configuring_kubelet">#</a></h2></div></div></div><div id="id-1.16.5.2" class="admonition warning normal"><img class="symbol" alt="Warning" title="Warning" src="static/images/icon-warning.png" /><h6>Warning</h6><p>Modifying the file <code class="literal">/etc/sysconfig/kubelet</code> directly is not supported.</p><p>The changes made to this file will not persist through an update/upgrade of the software.
Please follow the instructions below to change the configuration for <code class="literal">kubelet</code> persistently.</p></div><div id="id-1.16.5.3" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.png" /><h6>Note</h6><p>This procedure does not override the default configuration but amends the changes
from the "drop-in" configuration.</p><p>Please refer to: <a class="link" href="https://www.freedesktop.org/software/systemd/man/systemd.unit.html" target="_blank">https://www.freedesktop.org/software/systemd/man/systemd.unit.html</a></p></div><p>If you wish to modify the configuration for <code class="literal">kubelet</code> you must use the "drop-in"
configuration feature of systemd. The steps need to be performed on each cluster
node whose <code class="literal">kubelet</code> you wish to reconfigure.</p><div class="orderedlist "><ol class="orderedlist" type="1"><li class="listitem "><p>Create an appropriate <code class="literal">.conf</code> file (e.g. <code class="literal">resource-handling.conf</code>) in <code class="literal">/usr/lib/systemd/system/kubelet.service.d/</code> with your desired changes.
.</p></li><li class="listitem "><p>Reload the service definitions</p><div class="verbatim-wrap"><pre class="screen">sudo systemctl daemon-reload</pre></div></li><li class="listitem "><p>Restart kubelet</p><div class="verbatim-wrap"><pre class="screen">sudo systemctl restart kubelet</pre></div></li></ol></div></div><div class="sect1" id="k8s-changes-117-118"><div class="titlepage"><div><div><h2 class="title"><span class="number">14.5 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Changes from Kubernetes 1.17 to 1.18</span> <a title="Permalink" class="permalink" href="_miscellaneous.html#k8s-changes-117-118">#</a></h2></div></div></div><p>This documentation page lists all the behavioral changes and API deprecations that will happen from Kubernetes 1.17 to 1.18.
You will require this information when migrating to SUSE CaaS Platform 5.x shipping with Kubernetes 1.18.</p><div class="sect2" id="_api_deprecations"><div class="titlepage"><div><div><h3 class="title"><span class="number">14.5.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">API deprecations</span> <a title="Permalink" class="permalink" href="_miscellaneous.html#_api_deprecations">#</a></h3></div></div></div><p>The following APIs have been deprecated:</p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>All resources under <span class="strong"><strong>apps/v1beta1</strong></span> and <span class="strong"><strong>apps/v1beta2</strong></span>: please use <span class="strong"><strong>apps/v1</strong></span> instead.</p></li><li class="listitem "><p><span class="strong"><strong>daemonsets</strong></span>, <span class="strong"><strong>deployments</strong></span>, <span class="strong"><strong>replicasets</strong></span> under <span class="strong"><strong>extensions/v1beta1</strong></span>: please use <span class="strong"><strong>apps/v1</strong></span> instead.</p></li><li class="listitem "><p><span class="strong"><strong>networkpolicies</strong></span> under <span class="strong"><strong>extensions/v1beta1</strong></span>: please use <span class="strong"><strong>networking.k8s.io/v1</strong></span> instead.</p></li><li class="listitem "><p><span class="strong"><strong>podsecuritypolicies</strong></span> resources under <span class="strong"><strong>extensions/v1beta1</strong></span>: please use <span class="strong"><strong>policy/v1beta1</strong></span> instead.</p></li></ul></div></div><div class="sect2" id="_behavioral_changes"><div class="titlepage"><div><div><h3 class="title"><span class="number">14.5.2 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Behavioral changes</span> <a title="Permalink" class="permalink" href="_miscellaneous.html#_behavioral_changes">#</a></h3></div></div></div><p>In this section we will highlight some relevant changes that might interest you for the new Kubernetes version.</p><div class="sect3" id="_core"><div class="titlepage"><div><div><h4 class="title"><span class="number">14.5.2.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Core</span> <a title="Permalink" class="permalink" href="_miscellaneous.html#_core">#</a></h4></div></div></div><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p><a class="link" href="https://github.com/kubernetes/enhancements/issues/853" target="_blank">#853</a> Configurable scale velocity for HPA.</p></li><li class="listitem "><p><a class="link" href="https://github.com/kubernetes/enhancements/issues/1393" target="_blank">#1393</a> Provide OIDC discovery for service account token issuer.</p></li><li class="listitem "><p><a class="link" href="https://github.com/kubernetes/enhancements/issues/1513" target="_blank">#1513</a> CertificateSigningRequest API.</p></li></ul></div></div><div class="sect3" id="_scheduling"><div class="titlepage"><div><div><h4 class="title"><span class="number">14.5.2.2 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Scheduling</span> <a title="Permalink" class="permalink" href="_miscellaneous.html#_scheduling">#</a></h4></div></div></div><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p><a class="link" href="https://github.com/kubernetes/enhancements/issues/1451" target="_blank">#1451</a> Run multiple Scheduling Profiles [Alpha]</p></li><li class="listitem "><p><a class="link" href="https://github.com/kubernetes/enhancements/issues/895" target="_blank">#895</a> Even pod spreading across failure domains [Beta]</p></li><li class="listitem "><p><a class="link" href="https://github.com/kubernetes/enhancements/issues/1258" target="_blank">#1258</a> Add a configurable default Even Pod Spreading rule [Alpha]</p></li><li class="listitem "><p><a class="link" href="https://github.com/kubernetes/enhancements/issues/166" target="_blank">#166</a> Taint Based Eviction [Stable]</p></li></ul></div></div><div class="sect3" id="_nodes"><div class="titlepage"><div><div><h4 class="title"><span class="number">14.5.2.3 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Nodes</span> <a title="Permalink" class="permalink" href="_miscellaneous.html#_nodes">#</a></h4></div></div></div><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p><a class="link" href="https://github.com/kubernetes/enhancements/issues/1539" target="_blank">#1539</a> Extending Hugepage Feature [Stable]</p></li><li class="listitem "><p><a class="link" href="https://github.com/kubernetes/enhancements/issues/688" target="_blank">#688</a> Pod Overhead: account resources tied to the pod sandbox, but not specific containers [Beta]</p></li><li class="listitem "><p><a class="link" href="https://github.com/kubernetes/enhancements/issues/693" target="_blank">#693</a> Node Topology Manager [Beta]</p></li><li class="listitem "><p><a class="link" href="https://github.com/kubernetes/enhancements/issues/950" target="_blank">#950</a> Add pod-startup liveness-probe holdoff for slow-starting pods [Beta]</p></li></ul></div></div><div class="sect3" id="_networking"><div class="titlepage"><div><div><h4 class="title"><span class="number">14.5.2.4 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Networking</span> <a title="Permalink" class="permalink" href="_miscellaneous.html#_networking">#</a></h4></div></div></div><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p><a class="link" href="https://github.com/kubernetes/enhancements/issues/752" target="_blank">#752</a> EndpointSlice API [Beta]</p></li><li class="listitem "><p><a class="link" href="https://github.com/kubernetes/enhancements/issues/508" target="_blank">#508</a> IPv6 support added [Beta]</p></li><li class="listitem "><p><a class="link" href="https://github.com/kubernetes/enhancements/issues/1024" target="_blank">#1024</a> Graduate NodeLocal DNSCache to GA [Stable]</p></li><li class="listitem "><p><a class="link" href="https://github.com/kubernetes/enhancements/issues/1453" target="_blank">#1453</a> Graduate Ingress to V1 [Beta]</p></li><li class="listitem "><p><a class="link" href="https://github.com/kubernetes/enhancements/issues/1507" target="_blank">#1507</a> Adding AppProtocol to Services and Endpoints [Stable]</p></li></ul></div></div><div class="sect3" id="_api"><div class="titlepage"><div><div><h4 class="title"><span class="number">14.5.2.5 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">API</span> <a title="Permalink" class="permalink" href="_miscellaneous.html#_api">#</a></h4></div></div></div><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p><a class="link" href="https://github.com/kubernetes/enhancements/issues/1040" target="_blank">#1040</a> Priority and Fairness for API Server Requests [Alpha]</p></li><li class="listitem "><p><a class="link" href="https://github.com/kubernetes/enhancements/issues/1601" target="_blank">#1601</a> client-go signature refactor to standardize options and context handling [Stable]</p></li><li class="listitem "><p><a class="link" href="https://github.com/kubernetes/enhancements/issues/576" target="_blank">#576</a> APIServer DryRun [Stable]</p></li><li class="listitem "><p><a class="link" href="https://github.com/kubernetes/enhancements/issues/1281" target="_blank">#1281</a> API Server Network Proxy KEP to Beta [Beta]</p></li></ul></div></div><div class="sect3" id="_storage_2"><div class="titlepage"><div><div><h4 class="title"><span class="number">14.5.2.6 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Storage</span> <a title="Permalink" class="permalink" href="_miscellaneous.html#_storage_2">#</a></h4></div></div></div><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p><a class="link" href="https://github.com/kubernetes/enhancements/issues/695" target="_blank">#695</a> Skip Volume Ownership Change [Alpha]</p></li><li class="listitem "><p><a class="link" href="https://github.com/kubernetes/enhancements/issues/1412" target="_blank">#1412</a> Immutable Secrets and ConfigMaps [Alpha]</p></li><li class="listitem "><p><a class="link" href="https://github.com/kubernetes/enhancements/issues/1495" target="_blank">#1495</a> Generic data populators [Alpha]</p></li><li class="listitem "><p><a class="link" href="https://github.com/kubernetes/enhancements/issues/770" target="_blank">#770</a> Skip attach for non-attachable CSI volumes [Stable]</p></li><li class="listitem "><p><a class="link" href="https://github.com/kubernetes/enhancements/issues/351" target="_blank">#351</a> Raw block device using persistent volume source [Stable]</p></li><li class="listitem "><p><a class="link" href="https://github.com/kubernetes/enhancements/issues/565" target="_blank">#565</a> CSI Block storage support [Stable]</p></li><li class="listitem "><p><a class="link" href="https://github.com/kubernetes/enhancements/issues/603" target="_blank">#603</a> Pass Pod information in CSI calls [Stable]</p></li><li class="listitem "><p><a class="link" href="https://github.com/kubernetes/enhancements/issues/989" target="_blank">#989</a> Extend allowed PVC DataSources [Stable]</p></li></ul></div></div><div class="sect3" id="_features"><div class="titlepage"><div><div><h4 class="title"><span class="number">14.5.2.7 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Features</span> <a title="Permalink" class="permalink" href="_miscellaneous.html#_features">#</a></h4></div></div></div><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p><a class="link" href="https://github.com/kubernetes/enhancements/issues/1441" target="_blank">#1441</a> kubectl debug [Alpha]</p></li><li class="listitem "><p><a class="link" href="https://github.com/kubernetes/enhancements/issues/491" target="_blank">#491</a> kubectl diff [Stable]</p></li><li class="listitem "><p><a class="link" href="https://github.com/kubernetes/enhancements/issues/670" target="_blank">#670</a> Support Out-of-Tree vSphere Cloud Provider [Stable]</p></li></ul></div></div></div></div></div></div><div class="page-bottom"><div id="_bottom-navigation"><a class="nav-link" href="_troubleshooting_3.html"><span class="next-icon">→</span><span class="nav-label"><span class="number">Chapter 15 </span>Troubleshooting</span></a><a class="nav-link" href="backup-and-restore-with-velero.html"><span class="prev-icon">←</span><span class="nav-label"><span class="number">Chapter 13 </span>Backup and Restore with Velero</span></a></div><div class="_share-print"><div class="online-contents share"><strong>Share this page: </strong><span class="share-buttons"><span class="_share-fb bottom-button">Facebook</span><span class="spacer"> • </span><span class="_share-in bottom-button">LinkedIn</span><span class="spacer"> • </span><span class="_share-tw bottom-button">Twitter</span><span class="spacer"> • </span><span class="_share-mail bottom-button">E-Mail</span></span></div><div class="print"><span class="_print-button bottom-button">Print this page</span></div><div class="clearme"></div></div></div></div><div id="_inward"></div></div><div id="_footer-wrap"><div id="_footer"><p>©
        2020 
        SUSE</p><ul><li><a href="https://jobs.suse.com/" target="_top">Careers</a></li><li><a href="https://www.suse.com/company/legal/" target="_top">Legal</a></li><li><a href="https://www.suse.com/company/about/" target="_top">About</a></li><li><a href="https://www.suse.com/contact/" target="_top">Contact Us</a></li></ul></div></div></body></html>